["baa9a76df0dace3f9b2fcf999c6b81ed42406c0d","ce599a5e6ab2ba720a3faa6be654e527f438f7a5",["./isPromise"],[1741],{"version":3,"sources":["/var/www/geruapp/node_modules/redux-promise-middleware/dist/index.js"],"names":["Object","defineProperty","exports","value","REJECTED","FULFILLED","PENDING","undefined","_typeof","Symbol","iterator","obj","constructor","prototype","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","_s","next","done","push","err","Array","isArray","TypeError","default","promiseMiddleware","_isPromise","require","_isPromise2","_interopRequireDefault","__esModule","defaultTypes","config","promiseTypeSuffixes","ref","dispatch","action","payload","promise","type","meta","_promiseTypeSuffixes","_PENDING","_FULFILLED","_REJECTED","getAction","newPayload","isRejected","error","data","transformFulfill","resolvedAction","handleReject","reason","rejectedAction","handleFulfill","successValue","promiseValue","then","sideEffects"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.REJECTED = exports.FULFILLED = exports.PENDING = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.default = promiseMiddleware;\n\nvar _isPromise = require('./isPromise');\n\nvar _isPromise2 = _interopRequireDefault(_isPromise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PENDING = exports.PENDING = 'PENDING';\nvar FULFILLED = exports.FULFILLED = 'FULFILLED';\nvar REJECTED = exports.REJECTED = 'REJECTED';\n\nvar defaultTypes = [PENDING, FULFILLED, REJECTED];\n\n/**\n * @function promiseMiddleware\n * @description\n * @returns {function} thunk\n */\nfunction promiseMiddleware() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var promiseTypeSuffixes = config.promiseTypeSuffixes || defaultTypes;\n\n  return function (ref) {\n    var dispatch = ref.dispatch;\n\n\n    return function (next) {\n      return function (action) {\n        if (action.payload) {\n          if (!(0, _isPromise2.default)(action.payload) && !(0, _isPromise2.default)(action.payload.promise)) {\n            return next(action);\n          }\n        } else {\n          return next(action);\n        }\n\n        // Deconstruct the properties of the original action object to constants\n        var type = action.type,\n            payload = action.payload,\n            meta = action.meta;\n\n        // Assign values for promise type suffixes\n\n        var _promiseTypeSuffixes = _slicedToArray(promiseTypeSuffixes, 3),\n            _PENDING = _promiseTypeSuffixes[0],\n            _FULFILLED = _promiseTypeSuffixes[1],\n            _REJECTED = _promiseTypeSuffixes[2];\n\n        /**\n         * @function getAction\n         * @description Utility function for creating a rejected or fulfilled\n         * flux standard action object.\n         * @param {boolean} Is the action rejected?\n         * @returns {object} action\n         */\n\n\n        var getAction = function getAction(newPayload, isRejected) {\n          return _extends({\n            type: type + '_' + (isRejected ? _REJECTED : _FULFILLED)\n          }, newPayload === null || typeof newPayload === 'undefined' ? {} : {\n            payload: newPayload\n          }, meta !== undefined ? { meta: meta } : {}, isRejected ? {\n            error: true\n          } : {});\n        };\n\n        /**\n         * Assign values for promise and data variables. In the case the payload\n         * is an object with a `promise` and `data` property, the values of those\n         * properties will be used. In the case the payload is a promise, the\n         * value of the payload will be used and data will be null.\n         */\n        var promise = void 0;\n        var data = void 0;\n\n        if (!(0, _isPromise2.default)(action.payload) && _typeof(action.payload) === 'object') {\n          promise = payload.promise;\n          data = payload.data;\n        } else {\n          promise = payload;\n          data = undefined;\n        }\n\n        /**\n         * First, dispatch the pending action. This flux standard action object\n         * describes the pending state of a promise and will include any data\n         * (for optimistic updates) and/or meta from the original action.\n         */\n        next(_extends({\n          type: type + '_' + _PENDING\n        }, data !== undefined ? { payload: data } : {}, meta !== undefined ? { meta: meta } : {}));\n\n        /*\n         * @function transformFulfill\n         * @description Transforms a fulfilled value into a success object.\n         * @returns {object}\n         */\n        var transformFulfill = function transformFulfill() {\n          var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n          var resolvedAction = getAction(value, false);\n          return { value: value, action: resolvedAction };\n        };\n\n        /*\n         * @function handleReject\n         * @description Dispatch the rejected action.\n         * @returns {void}\n         */\n        var handleReject = function handleReject(reason) {\n          var rejectedAction = getAction(reason, true);\n          dispatch(rejectedAction);\n        };\n\n        /*\n         * @function handleFulfill\n         * @description Dispatch the fulfilled action.\n         * @param successValue The value from transformFulfill\n         * @returns {void}\n         */\n        var handleFulfill = function handleFulfill(successValue) {\n          dispatch(successValue.action);\n        };\n\n        /**\n         * Second, dispatch a rejected or fulfilled action. This flux standard\n         * action object will describe the resolved state of the promise. In\n         * the case of a rejected promise, it will include an `error` property.\n         *\n         * In order to allow proper chaining of actions using `then`, a new\n         * promise is constructed and returned. This promise will resolve\n         * with two properties: (1) the value (if fulfilled) or reason\n         * (if rejected) and (2) the flux standard action.\n         *\n         * Rejected object:\n         * {\n         *   reason: ...\n         *   action: {\n         *     error: true,\n         *     type: 'ACTION_REJECTED',\n         *     payload: ...\n         *   }\n         * }\n         *\n         * Fulfilled object:\n         * {\n         *   value: ...\n         *   action: {\n         *     type: 'ACTION_FULFILLED',\n         *     payload: ...\n         *   }\n         * }\n         */\n        var promiseValue = promise.then(transformFulfill);\n        var sideEffects = promiseValue.then(handleFulfill, handleReject);\n        return sideEffects.then(function () {\n          return promiseValue;\n        }, function () {\n          return promiseValue;\n        });\n      };\n    };\n  };\n}"]}]