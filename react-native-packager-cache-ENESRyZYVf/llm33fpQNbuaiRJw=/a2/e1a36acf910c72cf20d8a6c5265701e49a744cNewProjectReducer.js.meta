["71c57dd9a3a273980c6dc2cc0c049599f33c9c4a","9e7416284af645925bee6031acf21f657b755571",["../ProjectConstants","../NewProjectInitialState","../../components/fieldValidation","../projectFormValidation"],[127,190,345,499],{"version":3,"sources":["/var/www/geruapp/src/project/reducers/NewProjectReducer.js"],"names":["newProject","initialState","state","action","type","nextState","setIn","Date","selectedFiles","getIn","count","unshift","payload","suggestedData","concat","tagsData","splice","length","index","indexOf","push","fetching","error","response","fetched","skill_categories","selectedSkills","get","field","value","photos","photo","data","fileName","height","width","set"],"mappings":"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","sourcesContent":["import { \n\tFETCHING,\n\tGET_SKILL_CATEGORIES,\n\tGET_SKILL_CATEGORIES_FAILED,\n\tGET_SKILL_CATEGORIES_FULFILLED,\n\tPRICE_BUNDLE_CHANGED,\n\tON_PROJECT_FORM_FIELD_CHANGE,\n\tDURATION_TYPE_CHANGED,\n\tDURATION_VALUE_CHANGED,\n\tSELECTED_SKILL_TOGGLE,\n\tCHECK_PROJECT_VALIDATION,\n\tNEW_PROJECT_IMAGE_UPLOADED,\n\tNEW_PROJECT_IMAGE_REMOVED,\n\tNEW_PROJECT,\n\tSAVE_PROJECT_FULFILLED,\n\tSAVE_PROJECT_FAILED,\n\n\tGET_TAGS,\n\tGET_TAGS_FULFILLED,\n\tGET_TAGS_FAILED,\n\tTAG_SELECTED,\n\tTAG_DISELECT,\n\tTAG_REMOVE,\n\tGET_SUGGESTED_SHOWCASES,\n\tGET_SUGGESTED_SHOWCASES_FULFILLED,\n\tSUGGESTED_IMAGE_CHOOSED,\n} from '../ProjectConstants'\t\n\nimport InitialState from '../NewProjectInitialState'\nimport fieldValidation from '../../components/fieldValidation'\nimport formValidation from '../projectFormValidation'\n\nconst initialState = new InitialState()\n\nexport default function newProject(state = initialState, action) {\n\n\tswitch (action.type) {\n\t\tcase FETCHING : {\n\t\t\tlet nextState = state.setIn(['fetching'], true)\n      \t\treturn nextState\t\n\t\t}\n\n\t\tcase NEW_PROJECT: {\n\t\t\tlet nextState = state.setIn(['form', 'fields', 'title'], '')\n\t\t\t\t\t\t     .setIn(['form', 'fields', 'description'], '')\n\t\t\t\t\t\t     .setIn(['form', 'fields', 'awardDate'], new Date())\n\t\t\t\t\t\t     .setIn(['form', 'error'], null)\n\t\t\t\t\t\t     .setIn(['form', 'isFetching'], false)\n      \t\treturn formValidation(nextState, action)\n\t\t}\n\n\t\tcase SUGGESTED_IMAGE_CHOOSED: {\n\t\t\tlet selectedFiles = state.getIn(['files', 'selectedFiles', 'data'])\n\t\t\tlet count = state.getIn(['files', 'selectedFiles', 'count'])\n\n\t\t\tselectedFiles.unshift(action.payload)\n\t\t\tcount ++\n\t\t\t\n\t\t\tlet nextState = state.setIn(['files', 'selectedFiles', 'data'], selectedFiles)\n\t\t\t                     .setIn(['files', 'selectedFiles', 'count'], count)\n\t\t\treturn nextState\n\t\t}\n\n\t\tcase GET_SUGGESTED_SHOWCASES: {\n\t\t\tlet nextState = state.setIn(['files', 'imagesTabs', 1, 'fetching'], true)\n\t\t\treturn nextState\t\t\t\n\t\t}\n\n\t\tcase GET_SUGGESTED_SHOWCASES_FULFILLED: {\n\t\t\t//alert(action.payload.length)\n\t\t\tlet suggestedData = state.getIn(['files', 'imagesTabs', 1, 'data'])\n\n\t\t\tsuggestedData = suggestedData.concat(action.payload)\n\n\t\t\tlet nextState = state.setIn(['files', 'imagesTabs', 1, 'fetching'], false)\n\t\t\t\t\t\t\t\t .setIn(['files', 'imagesTabs', 1, 'data'], suggestedData)\n\t\t\t//alert(nextState.getIn(['files', 'imagesTabs', 1, 'data']).length)\n\t\t\treturn nextState\n\t\t}\n\n\t\tcase TAG_REMOVE: {\n\t\t\tlet tagsData = state.getIn(['tags', 'selected'])\n\n\t\t\ttagsData.splice(0, tagsData.length)\n\n\t\t\tlet nextState = state.setIn(['tags', 'selected'], tagsData)\n\t\t\treturn nextState\n\t\t}\n\n\t\tcase TAG_DISELECT: {\n\t\t\tlet tagsData = state.getIn(['tags', 'selected'])\n\t\t\tlet suggestedData = state.getIn(['tags', 'suggested'])\n\n\t\t\tvar index = tagsData.indexOf(action.payload);\n\n\t\t\tif(index > -1) {\n\t\t\t\ttagsData.splice(index, 1)\n\t\t\t}\n\n\t\t\tsuggestedData.splice(0, suggestedData.length)\n\n\t\t\tlet nextState = state.setIn(['tags', 'selected'], tagsData)\n\t\t\t\t\t\t\t\t .setIn(['tags', 'suggested'], suggestedData)\n\t\t\treturn nextState\n\t\t}\n\n\t\tcase TAG_SELECTED: {\n\t\t\tlet tagsData = state.getIn(['tags', 'selected'])\n\t\t\tlet suggestedData = state.getIn(['tags', 'suggested'])\n\n\t\t\ttagsData.push(action.payload)\n\n\t\t\tsuggestedData.splice(0, suggestedData.length)\t\t\t\n\n\t\t\tlet nextState = state.setIn(['tags', 'selected'], tagsData)\n\t\t\t\t\t\t\t\t .setIn(['tags', 'suggested'], suggestedData)\n\t\t\treturn nextState\n\t\t}\n\n\t\tcase GET_TAGS: {\n\t\t\treturn state.setIn(['tags', 'fetching'], true)\n\t\t}\n\n\t\tcase GET_TAGS_FULFILLED: {\n\t\t\treturn state.setIn(['tags', 'fetching'], false)\n\t\t\t\t\t\t.setIn(['tags', 'suggested'], action.payload)\n\t\t}\n\n\t\tcase GET_SKILL_CATEGORIES : {\n\t\t\treturn {...state, fetching: true}\n\t\t}\n\n\t\tcase GET_SKILL_CATEGORIES_FAILED : {\n\t\t\treturn {...state, fetching: false, error: action.response}\n\t\t}\n\n\t\tcase GET_SKILL_CATEGORIES_FULFILLED : {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetching: false,\n\t\t\t\tfetched: true,\n\t\t\t\tskill_categories: action.response,\n\t\t\t}\n\t\t}\n\n\t\tcase SELECTED_SKILL_TOGGLE: {\n\t\t\tlet selectedSkills = state.get('selected_skills')\n\t\t\t\n\t\t\tvar index = selectedSkills.indexOf(action.payload)\n\n\t\t\tif(index > -1) {\n\t\t\t\tselectedSkills.splice(index, 1)\n\t\t\t} else {\n\t\t\t\tselectedSkills.push(action.payload)\n\t\t\t}\n\n\t\t\tlet nextState = state.setIn(['selected_skills'], selectedSkills)\n\t\t\treturn formValidation(nextState)\n\t\t}\t\n\n\t\tcase PRICE_BUNDLE_CHANGED: {\n\n\t\t\tlet nextState = state.setIn(['selectedPriceBundle'], action.payload)\n      \t\treturn nextState\n\t\t}\n\n\t\tcase DURATION_TYPE_CHANGED: {\n\t\t\tlet nextState = state.setIn(['selectedDurationType'], action.payload)\n      \t\treturn nextState\t\n\t\t}\n\n\t\tcase DURATION_VALUE_CHANGED: {\n\t\t\tlet nextState = state.setIn(['durationValue'], action.payload)\n      \t\treturn nextState\t\n\t\t}\n\n\t\tcase ON_PROJECT_FORM_FIELD_CHANGE: {\n\t\t\tconst {field, value} = action.payload\n\t\t    let nextState = state.setIn(['form', 'fields', field], value)\n\t\t          .setIn(['form', 'error'], null)\n\n\t\t    return formValidation(fieldValidation(nextState, action), action)\n\t\t}\n\n\t\tcase NEW_PROJECT_IMAGE_UPLOADED: {\n\t\t\tlet photos = state.get('photos')\n\t\t\tlet photo = action.payload\n\n\t\t\tphotos.unshift({\n\t\t\t\t'uri': 'data:' + photo.type + ';base64,' + photo.data,\n\t\t\t\t'ext': photo.type,\n\t\t\t\t'name': photo.fileName,\n\t\t\t\t'height': photo.height,\n\t\t\t\t'width': photo.width,\n\t\t\t})\n\n\t\t\tlet nextState = state.set('photos', photos)\n\t\t\treturn formValidation(nextState)\n\t\t}\n\n\t\tcase NEW_PROJECT_IMAGE_REMOVED: {\n\t\t\tlet photos = state.get('photos')\n\t\t\tvar index = photos.indexOf(action.payload)\n\n\t\t\tif(index > -1)\n\t\t\t\tphotos.splice(index, 1)\n\n\t\t\tlet nextState = state.set('photos', photos)\n\t\t\treturn formValidation(nextState)\n\t\t}\n\n\t\tcase CHECK_PROJECT_VALIDATION: {\n\t\t\tlet nextState = state.setIn(['form', 'error'], null)\n\t\t\t\t\t\t\t\t .setIn(['form', 'isValid'], true)\n\n\t\t\treturn formValidation(nextState)\n\t\t}\n\n\t\tcase SAVE_PROJECT_FAILED: {\n\t\t\treturn state.set('fetching', false)\n\t\t\t\t\t\t.set('error', action)\n\t\t}\n\n\t\tcase SAVE_PROJECT_FULFILLED: {\n\t\t\treturn state.set('fetching', false)\n\t\t\t\t\t\t.set('fetched', true)\n\t\t\t\t\t\t.set('error', null)\n\t\t}\n\t}\n\n\treturn state\n}\n\n"]}]