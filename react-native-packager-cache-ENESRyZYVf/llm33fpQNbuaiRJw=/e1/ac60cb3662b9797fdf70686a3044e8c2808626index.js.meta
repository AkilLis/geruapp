["d938d03dbc318e924151c33b80d7328b92199baf","b6b0d83005bd8b8efabbf02ab6c9328d8e7c4f3f",[],[],{"version":3,"sources":["/var/www/geruapp/node_modules/smart-mixin/index.js"],"names":["objToStr","x","Object","prototype","toString","call","returner","wrapIfFunction","thing","apply","arguments","setNonEnumerable","target","key","value","defineProperty","writable","configurable","defaultNonFunctionProperty","left","right","undefined","getTypeName","obj","constructor","name","slice","TypeError","assertObject","obj2","type","displayType","displayType2","Error","mixins","module","exports","makeMixinFunction","rules","_opts","opts","unknownFunction","ONCE","nonFunctionProperty","applyMixin","source","mixin","keys","forEach","rule","fn","leftIsFn","rightIsFn","_mergeObjects","obj1","Array","isArray","concat","result","k","hasOwnProperty","JSON","stringify","MANY","MANY_MERGED_LOOSE","MANY_MERGED","res1","res2","REDUCE_LEFT","_left","_right","REDUCE_RIGHT"],"mappings":"AAAA,SAASA,QAAT,CAAkBC,CAAlB,EAAoB;AAAE,WAAOC,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,CAA/B,CAAP;AAA2C;;AAEjE,SAASK,QAAT,CAAkBL,CAAlB,EAAqB;AAAE,WAAOA,CAAP;AAAW;;AAElC,SAASM,cAAT,CAAwBC,KAAxB,EAA8B;AAC1B,WAAO,OAAOA,KAAP,KAAiB,UAAjB,GAA8BA,KAA9B,GACL,YAAU;AACR,eAAOA,MAAMC,KAAN,CAAY,IAAZ,EAAkBC,SAAlB,CAAP;AACH,KAHD;AAIH;;AAED,SAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,GAAlC,EAAuCC,KAAvC,EAA6C;AACzC,QAAID,OAAOD,MAAX,EAAkB;AACdA,eAAOC,GAAP,IAAcC,KAAd;AACH,KAFD,MAGK;AACDZ,eAAOa,cAAP,CAAsBH,MAAtB,EAA8BC,GAA9B,EAAmC;AAC/BC,mBAAOA,KADwB;AAE/BE,sBAAU,IAFqB;AAG/BC,0BAAc;AAHiB,SAAnC;AAKH;AACJ;;AAED,SAASC,0BAAT,CAAoCC,IAApC,EAA0CC,KAA1C,EAAiDP,GAAjD,EAAqD;AACjD,QAAIM,SAASE,SAAT,IAAsBD,UAAUC,SAApC,EAA+C;AAC3C,YAAIC,cAAc,SAAdA,WAAc,CAASC,GAAT,EAAa;AAC3B,gBAAIA,OAAOA,IAAIC,WAAX,IAA0BD,IAAIC,WAAJ,CAAgBC,IAA9C,EAAoD;AAChD,uBAAOF,IAAIC,WAAJ,CAAgBC,IAAvB;AACH,aAFD,MAGK;AACD,uBAAOzB,SAASuB,GAAT,EAAcG,KAAd,CAAoB,CAApB,EAAuB,CAAC,CAAxB,CAAP;AACH;AACJ,SAPD;AAQA,cAAM,IAAIC,SAAJ,CAAc,sBAAsBd,GAAtB,GAA4B,+CAA5B,GACV,oBADU,GACaS,YAAYH,IAAZ,CADb,GACiC,OADjC,GAC2CG,YAAYF,KAAZ,CADzD,CAAN;AAEH;AACD,WAAOD,SAASE,SAAT,GAAqBD,KAArB,GAA6BD,IAApC;AACH;;AAED,SAASS,YAAT,CAAsBL,GAAtB,EAA2BM,IAA3B,EAAgC;AAC5B,QAAIC,OAAO9B,SAASuB,GAAT,CAAX;AACA,QAAIO,SAAS,iBAAb,EAAgC;AAC5B,YAAIC,cAAcR,IAAIC,WAAJ,GAAkBD,IAAIC,WAAJ,CAAgBC,IAAlC,GAAyC,SAA3D;AACA,YAAIO,eAAeH,KAAKL,WAAL,GAAmBK,KAAKL,WAAL,CAAiBC,IAApC,GAA2C,SAA9D;AACA,cAAM,IAAIQ,KAAJ,CAAU,yCAAyCF,WAAzC,GAAuD,WAAvD,GAAqEC,YAA/E,CAAN;AACH;AACJ;;AAGD,IAAIE,SAASC,OAAOC,OAAP,GAAiB,SAASC,iBAAT,CAA2BC,KAA3B,EAAkCC,KAAlC,EAAwC;AAClE,QAAIC,OAAOD,SAAS,EAApB;;AAEA,QAAI,CAACC,KAAKC,eAAV,EAA2B;AACvBD,aAAKC,eAAL,GAAuBP,OAAOQ,IAA9B;AACH;;AAED,QAAI,CAACF,KAAKG,mBAAV,EAA+B;AAC3BH,aAAKG,mBAAL,GAA2BzB,0BAA3B;AACH;;AAED,WAAO,SAAS0B,UAAT,CAAoBC,MAApB,EAA4BC,KAA5B,EAAkC;AACrC5C,eAAO6C,IAAP,CAAYD,KAAZ,EAAmBE,OAAnB,CAA2B,UAASnC,GAAT,EAAa;AACpC,gBAAIM,OAAO0B,OAAOhC,GAAP,CAAX;AAAA,gBAAwBO,QAAQ0B,MAAMjC,GAAN,CAAhC;AAAA,gBAA4CoC,OAAOX,MAAMzB,GAAN,CAAnD;;AAIA,gBAAIM,SAASE,SAAT,IAAsBD,UAAUC,SAApC,EAA+C;;AAG/C,gBAAI4B,IAAJ,EAAU;AAEN,oBAAIC,KAAKD,KAAK9B,IAAL,EAAWC,KAAX,EAAkBP,GAAlB,CAAT;AACAF,iCAAiBkC,MAAjB,EAAyBhC,GAAzB,EAA8BN,eAAe2C,EAAf,CAA9B;AACA;AACH;;AAED,gBAAIC,WAAW,OAAOhC,IAAP,KAAgB,UAA/B;AACA,gBAAIiC,YAAY,OAAOhC,KAAP,KAAiB,UAAjC;;AAIA,gBAAI+B,YAAY/B,UAAUC,SAAtB,IACA+B,aAAajC,SAASE,SADtB,IAEA8B,YAAYC,SAFhB,EAE2B;AAGvBzC,iCAAiBkC,MAAjB,EAAyBhC,GAAzB,EAA8BN,eAAeiC,KAAKC,eAAL,CAAqBtB,IAArB,EAA2BC,KAA3B,EAAkCP,GAAlC,CAAf,CAA9B;AACA;AACH;;AAKDgC,mBAAOhC,GAAP,IAAc2B,KAAKG,mBAAL,CAAyBxB,IAAzB,EAA+BC,KAA/B,EAAsCP,GAAtC,CAAd;AACH,SAjCD;AAkCH,KAnCD;AAoCH,CA/CD;;AAiDAqB,OAAOmB,aAAP,GAAuB,UAASC,IAAT,EAAezB,IAAf,EAAqB;AACxC,QAAI0B,MAAMC,OAAN,CAAcF,IAAd,KAAuBC,MAAMC,OAAN,CAAc3B,IAAd,CAA3B,EAAgD;AAC5C,eAAOyB,KAAKG,MAAL,CAAY5B,IAAZ,CAAP;AACH;;AAEDD,iBAAa0B,IAAb,EAAmBzB,IAAnB;AACAD,iBAAaC,IAAb,EAAmByB,IAAnB;;AAEA,QAAII,SAAS,EAAb;AACAxD,WAAO6C,IAAP,CAAYO,IAAZ,EAAkBN,OAAlB,CAA0B,UAASW,CAAT,EAAW;AACjC,YAAIzD,OAAOC,SAAP,CAAiByD,cAAjB,CAAgCvD,IAAhC,CAAqCwB,IAArC,EAA2C8B,CAA3C,CAAJ,EAAmD;AAC/C,kBAAM,IAAI1B,KAAJ,CAAU,gDAAgD4B,KAAKC,SAAL,CAAeH,CAAf,CAAhD,GAAoE,MAA9E,CAAN;AACH;AACDD,eAAOC,CAAP,IAAYL,KAAKK,CAAL,CAAZ;AACH,KALD;;AAOAzD,WAAO6C,IAAP,CAAYlB,IAAZ,EAAkBmB,OAAlB,CAA0B,UAASW,CAAT,EAAW;AAEjCD,eAAOC,CAAP,IAAY9B,KAAK8B,CAAL,CAAZ;AACH,KAHD;AAIA,WAAOD,MAAP;AACH,CArBD;;AAwBAxB,OAAOQ,IAAP,GAAc,UAASvB,IAAT,EAAeC,KAAf,EAAsBP,GAAtB,EAA0B;AACpC,QAAIM,QAAQC,KAAZ,EAAmB;AACf,cAAM,IAAIO,SAAJ,CAAc,kBAAkBd,GAAlB,GAAwB,sCAAtC,CAAN;AACH;AACD,WAAOM,QAAQC,KAAf;AACH,CALD;;AAOAc,OAAO6B,IAAP,GAAc,UAAS5C,IAAT,EAAeC,KAAf,EAAsBP,GAAtB,EAA0B;AACpC,WAAO,YAAU;AACb,YAAIO,KAAJ,EAAWA,MAAMX,KAAN,CAAY,IAAZ,EAAkBC,SAAlB;AACX,eAAOS,OAAOA,KAAKV,KAAL,CAAW,IAAX,EAAiBC,SAAjB,CAAP,GAAqCW,SAA5C;AACH,KAHD;AAIH,CALD;;AAOAa,OAAO8B,iBAAP,GAA2B,UAAS7C,IAAT,EAAeC,KAAf,EAAsBP,GAAtB,EAA2B;AAClD,QAAIM,QAAQC,KAAZ,EAAmB;AACf,eAAOc,OAAOmB,aAAP,CAAqBlC,IAArB,EAA2BC,KAA3B,CAAP;AACH;AACD,WAAOD,QAAQC,KAAf;AACH,CALD;;AAOAc,OAAO+B,WAAP,GAAqB,UAAS9C,IAAT,EAAeC,KAAf,EAAsBP,GAAtB,EAA0B;AAC3C,WAAO,YAAU;AACb,YAAIqD,OAAO9C,SAASA,MAAMX,KAAN,CAAY,IAAZ,EAAkBC,SAAlB,CAApB;AACA,YAAIyD,OAAOhD,QAAQA,KAAKV,KAAL,CAAW,IAAX,EAAiBC,SAAjB,CAAnB;AACA,YAAIwD,QAAQC,IAAZ,EAAkB;AACd,mBAAOjC,OAAOmB,aAAP,CAAqBa,IAArB,EAA2BC,IAA3B,CAAP;AACH;AACD,eAAOA,QAAQD,IAAf;AACH,KAPD;AAQH,CATD;;AAWAhC,OAAOkC,WAAP,GAAqB,UAASC,KAAT,EAAgBC,MAAhB,EAAwBzD,GAAxB,EAA4B;AAC7C,QAAIM,OAAOkD,SAAS/D,QAApB;AACA,QAAIc,QAAQkD,UAAUhE,QAAtB;AACA,WAAO,YAAU;AACb,eAAOc,MAAMf,IAAN,CAAW,IAAX,EAAiBc,KAAKV,KAAL,CAAW,IAAX,EAAiBC,SAAjB,CAAjB,CAAP;AACH,KAFD;AAGH,CAND;;AAQAwB,OAAOqC,YAAP,GAAsB,UAASF,KAAT,EAAgBC,MAAhB,EAAwBzD,GAAxB,EAA4B;AAC9C,QAAIM,OAAOkD,SAAS/D,QAApB;AACA,QAAIc,QAAQkD,UAAUhE,QAAtB;AACA,WAAO,YAAU;AACb,eAAOa,KAAKd,IAAL,CAAU,IAAV,EAAgBe,MAAMX,KAAN,CAAY,IAAZ,EAAkBC,SAAlB,CAAhB,CAAP;AACH,KAFD;AAGH,CAND","sourcesContent":["function objToStr(x){ return Object.prototype.toString.call(x); };\n\nfunction returner(x) { return x; }\n\nfunction wrapIfFunction(thing){\n    return typeof thing !== \"function\" ? thing\n    : function(){\n        return thing.apply(this, arguments);\n    };\n}\n\nfunction setNonEnumerable(target, key, value){\n    if (key in target){\n        target[key] = value;\n    }\n    else {\n        Object.defineProperty(target, key, {\n            value: value,\n            writable: true,\n            configurable: true\n        });\n    }\n}\n\nfunction defaultNonFunctionProperty(left, right, key){\n    if (left !== undefined && right !== undefined) {\n        var getTypeName = function(obj){\n            if (obj && obj.constructor && obj.constructor.name) {\n                return obj.constructor.name;\n            }\n            else {\n                return objToStr(obj).slice(8, -1);\n            }\n        };\n        throw new TypeError('Cannot mixin key ' + key + ' because it is provided by multiple sources, '\n                + 'and the types are ' + getTypeName(left) + ' and ' + getTypeName(right));\n    }\n    return left === undefined ? right : left;\n};\n\nfunction assertObject(obj, obj2){\n    var type = objToStr(obj);\n    if (type !== '[object Object]') {\n        var displayType = obj.constructor ? obj.constructor.name : 'Unknown';\n        var displayType2 = obj2.constructor ? obj2.constructor.name : 'Unknown';\n        throw new Error('cannot merge returned value of type ' + displayType + ' with an ' + displayType2);\n    }\n};\n\n\nvar mixins = module.exports = function makeMixinFunction(rules, _opts){\n    var opts = _opts || {};\n\n    if (!opts.unknownFunction) {\n        opts.unknownFunction = mixins.ONCE;\n    }\n\n    if (!opts.nonFunctionProperty) {\n        opts.nonFunctionProperty = defaultNonFunctionProperty;\n    }\n\n    return function applyMixin(source, mixin){\n        Object.keys(mixin).forEach(function(key){\n            var left = source[key], right = mixin[key], rule = rules[key];\n\n            // this is just a weird case where the key was defined, but there's no value\n            // behave like the key wasn't defined\n            if (left === undefined && right === undefined) return;\n\n            // do we have a rule for this key?\n            if (rule) {\n                // may throw here\n                var fn = rule(left, right, key);\n                setNonEnumerable(source, key, wrapIfFunction(fn));\n                return;\n            }\n\n            var leftIsFn = typeof left === \"function\";\n            var rightIsFn = typeof right === \"function\";\n\n            // check to see if they're some combination of functions or undefined\n            // we already know there's no rule, so use the unknown function behavior\n            if (leftIsFn && right === undefined\n             || rightIsFn && left === undefined\n             || leftIsFn && rightIsFn) {\n                // may throw, the default is ONCE so if both are functions\n                // the default is to throw\n                setNonEnumerable(source, key, wrapIfFunction(opts.unknownFunction(left, right, key)));\n                return;\n            }\n\n            // we have no rule for them, one may be a function but one or both aren't\n            // our default is MANY_MERGED_LOOSE which will merge objects, concat arrays\n            // and throw if there's a type mismatch or both are primitives (how do you merge 3, and \"foo\"?)\n            source[key] = opts.nonFunctionProperty(left, right, key);\n        });\n    };\n};\n\nmixins._mergeObjects = function(obj1, obj2) {\n    if (Array.isArray(obj1) && Array.isArray(obj2)) {\n        return obj1.concat(obj2);\n    }\n\n    assertObject(obj1, obj2);\n    assertObject(obj2, obj1);\n\n    var result = {};\n    Object.keys(obj1).forEach(function(k){\n        if (Object.prototype.hasOwnProperty.call(obj2, k)) {\n            throw new Error('cannot merge returns because both have the ' + JSON.stringify(k) + ' key');\n        }\n        result[k] = obj1[k];\n    });\n\n    Object.keys(obj2).forEach(function(k){\n        // we can skip the conflict check because all conflicts would already be found\n        result[k] = obj2[k];\n    });\n    return result;\n};\n\n// define our built-in mixin types\nmixins.ONCE = function(left, right, key){\n    if (left && right) {\n        throw new TypeError('Cannot mixin ' + key + ' because it has a unique constraint.');\n    }\n    return left || right;\n};\n\nmixins.MANY = function(left, right, key){\n    return function(){\n        if (right) right.apply(this, arguments);\n        return left ? left.apply(this, arguments) : undefined;\n    };\n};\n\nmixins.MANY_MERGED_LOOSE = function(left, right, key) {\n    if (left && right) {\n        return mixins._mergeObjects(left, right);\n    }\n    return left || right;\n};\n\nmixins.MANY_MERGED = function(left, right, key){\n    return function(){\n        var res1 = right && right.apply(this, arguments);\n        var res2 = left && left.apply(this, arguments);\n        if (res1 && res2) {\n            return mixins._mergeObjects(res1, res2)\n        }\n        return res2 || res1;\n    };\n};\n\nmixins.REDUCE_LEFT = function(_left, _right, key){\n    var left = _left || returner;\n    var right = _right || returner;\n    return function(){\n        return right.call(this, left.apply(this, arguments));\n    };\n};\n\nmixins.REDUCE_RIGHT = function(_left, _right, key){\n    var left = _left || returner;\n    var right = _right || returner;\n    return function(){\n        return left.call(this, right.apply(this, arguments));\n    };\n};\n\n"]}]