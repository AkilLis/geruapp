["12ea4f1dd8c5074f6af4f0ff88c9d14805817056","5789a3f046936395d1be39b463d564a4b684bb88",["ErrorUtils","JSTimersExecution","Systrace","deepFreezeAndThrowOnMutationInDev","fbjs/lib/invariant","stringifySafe"],[42,89,134,196,258,309],{"version":3,"sources":["/var/www/geruapp/node_modules/react-native/Libraries/BatchedBridge/MessageQueue.js"],"names":["ErrorUtils","require","JSTimersExecution","Systrace","deepFreezeAndThrowOnMutationInDev","invariant","stringifySafe","TO_JS","TO_NATIVE","MODULE_IDS","METHOD_IDS","PARAMS","MIN_TIME_BETWEEN_FLUSHES_MS","TRACE_TAG_REACT_APPS","DEBUG_INFO_LIMIT","MessageQueue","_callableModules","_queue","_callbacks","_callbackID","_callID","_lastFlush","_eventLoopStartTime","Date","getTime","__DEV__","_debugInfo","_remoteModuleTable","_remoteMethodTable","callFunctionReturnFlushedQueue","bind","callFunctionReturnResultAndFlushedQueue","flushedQueue","invokeCallbackAndReturnFlushedQueue","module","method","args","__guard","__callFunction","__callImmediates","result","cbID","__invokeCallback","queue","length","name","moduleID","methodID","params","onFail","onSucc","callId","push","global","nativeTraceBeginAsyncFlow","JSON","stringify","now","nativeFlushQueueImmediate","_inCall","counterEvent","__spy","isFinite","type","methods","fn","error","reportFatalError","beginEvent","callImmediates","endEvent","moduleMethods","apply","callback","debug","errorMessage","profileName","spyOrToggle","prototype","console","log","info","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule MessageQueue\n * @flow\n */\n\n/*eslint no-bitwise: 0*/\n\n'use strict';\n\nconst ErrorUtils = require('ErrorUtils');\nconst JSTimersExecution = require('JSTimersExecution');\nconst Systrace = require('Systrace');\n\nconst deepFreezeAndThrowOnMutationInDev = require('deepFreezeAndThrowOnMutationInDev');\nconst invariant = require('fbjs/lib/invariant');\nconst stringifySafe = require('stringifySafe');\n\nexport type SpyData = {\n  type: number,\n  module: ?string,\n  method: string|number,\n  args: any\n}\n\nconst TO_JS = 0;\nconst TO_NATIVE = 1;\n\nconst MODULE_IDS = 0;\nconst METHOD_IDS = 1;\nconst PARAMS = 2;\nconst MIN_TIME_BETWEEN_FLUSHES_MS = 5;\n\nconst TRACE_TAG_REACT_APPS = 1 << 17;\n\nconst DEBUG_INFO_LIMIT = 32;\n\nclass MessageQueue {\n  _callableModules: {[key: string]: Object};\n  _queue: [Array<number>, Array<number>, Array<any>, number];\n  _callbacks: [];\n  _callbackID: number;\n  _callID: number;\n  _inCall: number;\n  _lastFlush: number;\n  _eventLoopStartTime: number;\n\n  _debugInfo: Object;\n  _remoteModuleTable: Object;\n  _remoteMethodTable: Object;\n\n  __spy: ?(data: SpyData) => void;\n\n  constructor() {\n    this._callableModules = {};\n    this._queue = [[], [], [], 0];\n    this._callbacks = [];\n    this._callbackID = 0;\n    this._callID = 0;\n    this._lastFlush = 0;\n    this._eventLoopStartTime = new Date().getTime();\n\n    if (__DEV__) {\n      this._debugInfo = {};\n      this._remoteModuleTable = {};\n      this._remoteMethodTable = {};\n    }\n\n    (this:any).callFunctionReturnFlushedQueue = this.callFunctionReturnFlushedQueue.bind(this);\n    (this:any).callFunctionReturnResultAndFlushedQueue = this.callFunctionReturnResultAndFlushedQueue.bind(this);\n    (this:any).flushedQueue = this.flushedQueue.bind(this);\n    (this:any).invokeCallbackAndReturnFlushedQueue = this.invokeCallbackAndReturnFlushedQueue.bind(this);\n  }\n\n  /**\n   * Public APIs\n   */\n\n  static spy(spyOrToggle: boolean|(data: SpyData) => void){\n    if (spyOrToggle === true){\n      MessageQueue.prototype.__spy = info => {\n        console.log(`${info.type === TO_JS ? 'N->JS' : 'JS->N'} : ` +\n                    `${info.module ? (info.module + '.') : ''}${info.method}` +\n                    `(${JSON.stringify(info.args)})`);\n      };\n    } else if (spyOrToggle === false) {\n      MessageQueue.prototype.__spy = null;\n    } else {\n      MessageQueue.prototype.__spy = spyOrToggle;\n    }\n  }\n\n  callFunctionReturnFlushedQueue(module: string, method: string, args: Array<any>) {\n    this.__guard(() => {\n      this.__callFunction(module, method, args);\n      this.__callImmediates();\n    });\n\n    return this.flushedQueue();\n  }\n\n  callFunctionReturnResultAndFlushedQueue(module: string, method: string, args: Array<any>) {\n    let result;\n    this.__guard(() => {\n      result = this.__callFunction(module, method, args);\n      this.__callImmediates();\n    });\n\n    return [result, this.flushedQueue()];\n  }\n\n  invokeCallbackAndReturnFlushedQueue(cbID: number, args: Array<any>) {\n    this.__guard(() => {\n      this.__invokeCallback(cbID, args);\n      this.__callImmediates();\n    });\n\n    return this.flushedQueue();\n  }\n\n  flushedQueue() {\n    this.__callImmediates();\n\n    const queue = this._queue;\n    this._queue = [[], [], [], this._callID];\n    return queue[0].length ? queue : null;\n  }\n\n  getEventLoopRunningTime() {\n    return new Date().getTime() - this._eventLoopStartTime;\n  }\n\n  registerCallableModule(name: string, module: Object) {\n    this._callableModules[name] = module;\n  }\n\n  enqueueNativeCall(moduleID: number, methodID: number, params: Array<any>, onFail: ?Function, onSucc: ?Function) {\n    if (onFail || onSucc) {\n      if (__DEV__) {\n        const callId = this._callbackID >> 1;\n        this._debugInfo[callId] = [moduleID, methodID];\n        if (callId > DEBUG_INFO_LIMIT) {\n          delete this._debugInfo[callId - DEBUG_INFO_LIMIT];\n        }\n      }\n      onFail && params.push(this._callbackID);\n      /* $FlowFixMe(>=0.38.0 site=react_native_fb,react_native_oss) - Flow error\n       * detected during the deployment of v0.38.0. To see the error, remove\n       * this comment and run flow */\n      this._callbacks[this._callbackID++] = onFail;\n      onSucc && params.push(this._callbackID);\n      /* $FlowFixMe(>=0.38.0 site=react_native_fb,react_native_oss) - Flow error\n       * detected during the deployment of v0.38.0. To see the error, remove\n       * this comment and run flow */\n      this._callbacks[this._callbackID++] = onSucc;\n    }\n\n    if (__DEV__) {\n      global.nativeTraceBeginAsyncFlow &&\n        global.nativeTraceBeginAsyncFlow(TRACE_TAG_REACT_APPS, 'native', this._callID);\n    }\n    this._callID++;\n\n    this._queue[MODULE_IDS].push(moduleID);\n    this._queue[METHOD_IDS].push(methodID);\n\n    if (__DEV__) {\n      // Any params sent over the bridge should be encodable as JSON\n      JSON.stringify(params);\n\n      // The params object should not be mutated after being queued\n      deepFreezeAndThrowOnMutationInDev((params:any));\n    }\n    this._queue[PARAMS].push(params);\n\n    const now = new Date().getTime();\n    if (global.nativeFlushQueueImmediate &&\n        (now - this._lastFlush >= MIN_TIME_BETWEEN_FLUSHES_MS ||\n         this._inCall === 0)) {\n      var queue = this._queue;\n      this._queue = [[], [], [], this._callID];\n      this._lastFlush = now;\n      global.nativeFlushQueueImmediate(queue);\n    }\n    Systrace.counterEvent('pending_js_to_native_queue', this._queue[0].length);\n    if (__DEV__ && this.__spy && isFinite(moduleID)) {\n      this.__spy(\n        { type: TO_NATIVE,\n          module: this._remoteModuleTable[moduleID],\n          method: this._remoteMethodTable[moduleID][methodID],\n          args: params }\n      );\n    } else if (this.__spy) {\n      this.__spy({type: TO_NATIVE, module: moduleID + '', method: methodID, args: params});\n    }\n  }\n\n  createDebugLookup(moduleID: number, name: string, methods: Array<string>) {\n    if (__DEV__) {\n      this._remoteModuleTable[moduleID] = name;\n      this._remoteMethodTable[moduleID] = methods;\n    }\n  }\n\n  /**\n   * Private methods\n   */\n\n  __guard(fn: () => void) {\n    this._inCall++;\n    try {\n      fn();\n    } catch (error) {\n      ErrorUtils.reportFatalError(error);\n    } finally {\n      this._inCall--;\n    }\n  }\n\n  __callImmediates() {\n    Systrace.beginEvent('JSTimersExecution.callImmediates()');\n    this.__guard(() => JSTimersExecution.callImmediates());\n    Systrace.endEvent();\n  }\n\n  __callFunction(module: string, method: string, args: Array<any>) {\n    this._lastFlush = new Date().getTime();\n    this._eventLoopStartTime = this._lastFlush;\n    Systrace.beginEvent(`${module}.${method}()`);\n    if (this.__spy) {\n      this.__spy({ type: TO_JS, module, method, args});\n    }\n    const moduleMethods = this._callableModules[module];\n    invariant(\n      !!moduleMethods,\n      'Module %s is not a registered callable module (calling %s)',\n      module, method\n    );\n    invariant(\n      !!moduleMethods[method],\n      'Method %s does not exist on module %s',\n      method, module\n    );\n    const result = moduleMethods[method].apply(moduleMethods, args);\n    Systrace.endEvent();\n    return result;\n  }\n\n  __invokeCallback(cbID: number, args: Array<any>) {\n    this._lastFlush = new Date().getTime();\n    this._eventLoopStartTime = this._lastFlush;\n    const callback = this._callbacks[cbID];\n\n    if (__DEV__) {\n      const debug = this._debugInfo[cbID >> 1];\n      const module = debug && this._remoteModuleTable[debug[0]];\n      const method = debug && this._remoteMethodTable[debug[0]][debug[1]];\n      if (callback == null) {\n        let errorMessage = `Callback with id ${cbID}: ${module}.${method}() not found`;\n        if (method) {\n          errorMessage = `The callback ${method}() exists in module ${module}, `\n          + 'but only one callback may be registered to a function in a native module.';\n        }\n        invariant(\n          callback,\n          errorMessage\n        );\n      }\n      const profileName = debug ? '<callback for ' + module + '.' + method + '>' : cbID;\n      if (callback && this.__spy) {\n        this.__spy({ type: TO_JS, module:null, method:profileName, args });\n      }\n      Systrace.beginEvent(\n        `MessageQueue.invokeCallback(${profileName}, ${stringifySafe(args)})`);\n    } else {\n      if (!callback) {\n        return;\n      }\n    }\n\n    /* $FlowFixMe(>=0.38.0 site=react_native_fb,react_native_oss) - Flow error\n     * detected during the deployment of v0.38.0. To see the error, remove this\n     * comment and run flow */\n    this._callbacks[cbID & ~1] = null;\n    /* $FlowFixMe(>=0.38.0 site=react_native_fb,react_native_oss) - Flow error\n     * detected during the deployment of v0.38.0. To see the error, remove this\n     * comment and run flow */\n    this._callbacks[cbID |  1] = null;\n    // $FlowIssue(>=0.35.0) #14551610\n    callback.apply(null, args);\n\n    if (__DEV__) {\n      Systrace.endEvent();\n    }\n  }\n}\n\nmodule.exports = MessageQueue;\n"]}]